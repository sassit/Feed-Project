{"note":"Don't delete this file! It's used internally to help with page regeneration.","body":"<h1>The feed project represents a common problem</h1>\r\n\r\nHow to read a feed properly within the least amount of time of processing it.\r\n\r\nObviously processing splits up into validation of input and generation of output. Output itself comprises valid output and error output report generation.\r\n\r\nThis project is based on a case study with the given constraints:\r\n\r\nA generator has to be implemented which generates randomly financial certificate updates which is represented by the following csv line:\r\n\r\n[timestamp],[isin],[currency],[bidprice],[bidsize],[askprice],[asksize]\r\n\r\nPrices are limited to 3digits.2digits\r\n\r\nA parser has to be implemented which parses and validates the input and generates a statistic (average of bid/ask price updates) and error report.\r\n\r\n<h2>Own constraints</h2>\r\n\r\nI've setup my own constraint to not use anything else except the JDK libraries, exception is the dependencies on the testing libraries, JUnit, JMock and Hamcrest.\r\n\r\n<h2>Constraints for the generator:</h2>\r\n\r\n- The number of the to be generated certificates are specified on the command line as well as the number of certificate updates per certificate (as well as the number of threads).\r\n- The isin generated has to be a valid isin, an example in words of the checkdigit algo was given.\r\n- No constraints on the currency generation except being ISO compliant (3 alphas).\r\n- Ask and bid price spread is 5, ask price always bigger or equal to bid price (no inverse spreads) but both within spread.\r\n- A series of certificates (per isin) are generated, the price spread within the series shall not be bigger than 10.\r\n- The number of threads processing the collection of generated certificates can be specified on the command line (e.g. specified that multithreading shall take place only when consuming the generated updates).\r\n\r\n<h2>Constraints for the parser:</h2>\r\n\r\n- The parser processes the generated output of the generator.\r\n- It validates the types and constraints given as constraints for the generator.\r\n- It writes an error output in a defined xml format for each line parsed, shows the erroneous line in the error output and the rules violated.\r\n- It writes a report file which reports the average prices per certificate over all parsed updates for valid input updates.\r\n\r\nBoth components are executable jars.\r\n\r\n<h2>Implementation</h2>\r\n\r\nThe solution has been implemented on a tdd basis, classes are reduced to the minimum to facilitate testability and composability.\r\nImplementation definition come to play mostly in the factories the rest is interface based.\r\nThe current solution writes 1 million lines without errors within 9 seconds on a dual core laptop.\r\nAfter trying to solve it non multithreaded by writing it to a bytebuffer per thread the current solution is reverted to lock the buffer per put operation when writing multithreaded on a random acces file.\r\n\r\n<h2>Open issues</h2>\r\n\r\nGiven the constraints and looking at the multithreaded file writer constraint to write/parse only after generation/parsing of the data, it is still open if there is not a solution without usage of locking, as mentioned, by partioning the writes per thread to dedicated byte buffers and merging it afterwards.\r\nThis has been attempted but failed on the truncating issue resulting out of it, the bytebuffers could not be merged into a contigous one and the resulting file size reflecting the actual content size and not the merged buffer size.\r\n\r\nGiven the price format constraints the space of numbers is limited to 100000, which should not be a problem given the other properties of the update to make it random, but the issue still is that around less than 10 updates of one million are not unique, in that case additional updates should be generated in order to generate the specified amount, this boils down to having a set collecting the updates which is on purpose.\r\n<h2>Running it</h2>\r\n\r\n- Clone the project. \r\n- Run mvn install just below the feed-project folder level.\r\n- In the target folders of feed-generator and feed-parser copy the jars into a directory of your choice.\r\n- Run: \r\n        <p>java -jar -Xms1024m -Xmx1280m feed-generator-1.0-SNAPSHOT.jar 1000 1000 10 test.csv</p>\r\n        <p>java -jar -Xms1024m -Xmx1280m feed-parser-1.0-SNAPSHOT.jar 10 test.csv report.xml error.xml</p>\r\n","name":"Feed-project","tagline":"A case study I have done, a feed generator randomly generating certificate updates multithreaded, and a feed parser that validates and accumulates the updates into a statistics report and an error report, multithreaded as well.","google":"UA-37465121-1"}